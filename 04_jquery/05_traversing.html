<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>traversing</title>
  <script src="js/jquery-3.6.0.js"></script>
  <style>
    .wrap * {
      border: 1px solid lightgray;
      display: block;
      padding: 5px;
      margin: 5px;
      color: gray;
    }
    .type {
      width: 500px;
    }
  </style>
</head>
<body>
  <h1>traversing</h1>
  <div class="wrap">
    <div class="type">div.type (great-grandparent)
        <ul>ul (grandparent)
            <li>li (direct parent)
                <span>span1</span>
            </li>
            <li>li (direct parent)
                <span>span2</span>
            </li>
        </ul>
    </div>
    <div class="type">div.type (grandparent)
        <p>p (direct parent)
            <span>span3</span>
        </p>
    </div>
    <!-- @실습문제 -->
    <div class="type test">
      div.test
      <ul>
          ul1
          <li>li1-1</li>
          <li>
              li1-2
              <ul>
                  ul2
                  <li>li2-1</li>
                  <li>li2-2</li>
                  <li>
                      li2-3
                      <ul>
                          ul3
                          <li>
                              li3
                              <span id="fromMe">fromMe</span>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
      </ul>
    </div>

  </div>
  <button id="btn1">부모</button>
  <button id="btn2">자식</button>
  <script>
    const style = {
      "color" : "red",
      "border" : "2px solid red"
    };

    /**
     * 부모
     *  - parent([selector]) 직계부모요소 찾음
     *  - parents([selector]) 모든 조상요소 찾음 (만약 selector가 주어지면 해당 selector에 매칭되는 조상요소를 찾음)
     *  - parentsUntil(selector) 특정 부모요소 전까지 모든 조상요소 
     */
    $(btn1).click(() => {
      // span태그 선택
      // console.log(
      //   $('span') 
      //   .css(style)
      // );
      
      // parent([selector])
      // span태그 각각의 부모요소를 선택
      // console.log(
      //   $('span')
      //   .parent() 
      //   .css(style)
      // );
      // span태그 직계부모요소 중 p태그만
      // console.log(
      //   $('span')
      //   .parent('p') 
      //   .css(style)
      // );

      // parents([selector])
      // span의 모든 조상요소 선택됨
      // console.log( 
      //   $('span')
      //   .parents() 
      //   .css(style)
      // );
      // span의 모든 조상요소 중 div만 선택
      // console.log( 
      //   $('span')
      //   .parents('div') 
      //   .css(style)
      // );

      // parentsUntil(selector)
      // span의 모든 조상요소 중 div 만나기 전까지의 모든 조상요소 가져오기
      // console.log( 
      //   $('span')
      //   .parentsUntil('div.type') 
      //   .css(style)
      // );
    });

    /**
     * 자식
     *  - children([selector]) : 모든 직계자식요소(selector를 지정하면 해당 selector에 해당하는 모든 직계자식요소를 가져옴)
     *  - find(selector) : 매칭되는 모든 후손요소 (selector를 지정하면 해당 selector에 해당하는 모든 후손요소를 가져옴)
     */
    $(btn2).click(() => {
      // 현재 상태
      // console.log(
      //   $('.wrap')
      //     .css(style)
      // );

      // childred([selector])
      // console.log(
      //   $('.wrap')
      //     .children()
      //     .css(style)
      // );
      // 자식요소 중 ul태그를 가진 자식요소만 찾기
      // console.log(
      //   $('.wrap')
      //     .children(':has(ul)')
      //     .css(style)
      // );
      // 자식레벨 한레벨씩 내리려면 .children을 계속 써주면 됨. 
      // console.log(
      //   $('.wrap')
      //     .children()
      //     .children(':has(li)')
      //     .css(style)
      // );

      // find(selector)
      // .wrap의 모든 후손요소 중 span태그에 해당하는 후손요소를 찾아라
      // console.log(
      //   $('.wrap')
      //     .find('span')
      //     .css(style)
      // );

    }); 

  </script>
  <div class="wrap">
    <p>p</p>
    <span>span</span>
    <h1>h1</h1>
    <h2 id="start">h2</h2>
    <h3>h3</h3>
    <h4>h4</h4>
    <p>p</p>
  </div>
  <button id="btn3">형제</button>
  <br><br>
  <button id="btn4">@실습문제</button>
  <script>
    /**
     * 형제
     *  - siblings([selector]) : 모든형제요소 (선택자가 주어진다면 선택자와 매칭되는 모든 형제요소)
     * 
     *  - next([selector]) : 다음형제요소 하나 
     *  - nextAll([selector]) : 다음 형제요소 모두
     *  - nextUntil([selector]) : 특정 형제요소 전까지의 모든 형제요소 (뒤쪽으로 찾음)
     * 
     *  - prev([selector]) : 이전형제요소 하나 
     *  - prevAll([selector]) : 이전 형제요소 모두
     *  - prevUntil([selector]) : 특정 형제요소 전까지의 모든 형제요소 (앞쪽으로 찾음)
     */
    $(btn3).click(() => {
      // siblings([selector]) 
      // 자기 자신을 제외한 모든 형제요소
      // $(start)
      //   .siblings()
      //   .css(style);
      // 자기 자신을 제외한 모든 형제요소 중 header 태그에 해당하는 형제요소만
      // $(start)
      //   .siblings(':header')
      //   .css(style);

      // next
      $(start)
        // .next()
        // .nextAll()
        // .nextAll(':header') // 다음 형제요소들 중 header태그에 해당하는 요소만
        .nextUntil('h4') // 다음 형제요소들 중 h4 태그 전까지 나오는 형제요소만
        .css(style);
      
    });


    /**
     * @실습문제 
     *  - li2-2, li2-3 찾아라
     *  - 시작지점: .wrap인 경우
     *  - 시작지점: #fromMe인 경우
     * 
     */
    $(btn4).click((e) => {
      // 시작지점: .wrap인 경우
      // console.log(
      //   $('.wrap')
      //     .find('ul')
      //     .eq(2)
      //     .children(':not(:first)')
      //     .css(style)
      // );
        
      // 시작지점: #fromMe인 경우
      // console.log(
      //   $('#fromMe')
      //     .parents('ul')
      //     .eq(1)
      //     .children(':not(:first)')
      //     .css(style)
      // );

      // 시작지점: #fromMe인 경우 - 방법 2
      console.log(
        $('#fromMe')
          .parent()
          .parent()
          .parent()
          .add(".type.test li:eq(3)") // jQuery 안에 요소를 낑겨넣을 수 있음 
          .css(style)
      );
      

    });
  </script>
  <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
</body>
</html>