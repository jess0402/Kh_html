<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API - String | Math | Date</title>
</head>
<body>
    <h1>API - String | Math | Date</h1>

    <h2>String</h2>
    <button onclick="test1();">확인</button>
    <script>
        /**
         * string타입 변수/값은 String 프로토타입의 메서드를 사용할 수 있다.
         */
        function test1(){
            const str = "Apple Samsung PineApple";

            console.log("toUpperCase : ", str.toUpperCase());
            console.log("toLowerCase : ", str.toLowerCase());

            console.log("indexOf : ", str.indexOf("Sam"));  // 6 : 0부터 시작해서 6번지에 있다.(공백도 자리수 포함)
            console.log("indexOf : ", str.indexOf("SSSSSS"));  // -1 : 없으면 -1 
            
            console.log("charAt : ", str.charAt(6));   // S : 6번지 문자 알려줘쉐여
            console.log("str[index] : ", str[6]);; // S : charAt과 똑같음!!

            // 문자열 잘라오기 1 - substring(start, end) : start에서부터 end-1 까지 잘라주세요
            //                 - start는 포함하지만 end는 포함하지 않음.
            //                 - end를 생략하면 start에서부터 끝까지 가져옴
            console.log("substring : ", str.substring(6, 9)); // Sam
            console.log("substring : ", str.substring(6)); // Samsung PineApple

            // 문자열 잘라오기 2 - substr(start, length) : start에서부터 length(몇 개)만큼 잘라주세요
            //                  - 역시 length를 생략하면 start에서부터 끝까지 가져옴
            console.log("substr : ", str.substr(6, 3)); // Sam
            console.log("substr : ", str.substr(6));  // Samsung PineApple

            // 문자 대체 - replace('원래 문자열', '대체할 문자열')
            //          - 원래문자열이 여러개 나와도 처음 만난 것만 처리됨.
            console.log("replace : ", str.replace('Apple', '사과'));
            console.log("replace : ", str.replace('Apple', '')); // 이런식으로 하면 문자열 제거도 가능.
            // 만약 str에 존재하는 모든 Apple을 지우고 싶다면?
            // 1. 반복문 사용
            let result = str;
            while(result.indexOf('Apple') > -1){  
                result = result.replace('Apple', '');
            }
            console.log(result); // Samsung Pine

            // 2. 정규표현식 사용
            console.log("replace : ", str.replace(/Apple/g, '')); // Samsumg Pine
            // Apple뒤의 g가 없으면 맨 처음 Apple만 지워짐. g가 붙어야 뒤에있는 모든 Apple이 다 지워지는 것.

            // str에서 대문자든 소문자든 a의 개수를 조회하기
            let cnt = 0;
            for(let i = 0; i < str.length; i++){
                if(str[i].toLowerCase()=='a'){
                    cnt++;
                }
            }
            console.log(cnt);


            // 문자열안에서 특정문자 개수 찾기
            let count = str.match(/Apple/g);
            console.log(count.length);
            
        }
    </script>

    <h2>Math</h2>
    <button onclick="test2();">확인</button>
    <button onclick="test3();">실습문제</button>
    <ul id="test">
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
        <li></li>
    </ul>
    <style>
        .even {
            color: violet;
        }
    </style>
    <script>

        /**
         * ul#test li태그에 1 ~ 1000사이의 난수를 대입하고, 짝수인 경우 color를 변경하는 함수
         * - 매 실행시마다 초기화되어야 함
         */
        function test3(){
            let test_li = document.querySelectorAll('#test li');

            for(let i = 0; i < test_li.length; i++) {
                const li = test_li[i]
                li.innerHTML = Math.floor(Math.random() * 1000) + 1;

                if(li.innerHTML % 2 == 0){
                    li.classList.add('even');
                }
                else{
                    li.classList.remove('even');
                }
            }
        }

        // 강사님코드
        function test3_teacher(){
            const list = document.querySelectorAll("ul#test li");
            for(let i = 0; i < list.length; i++){
                const li = list[i];
                li.classList.remove('even');
                const n = Math.floor(Math.random() * 1000) + 1;
                li.innerText = n;
                if(n % 2 == 0){
                    li.classList.add('even');
                }
            }
        }
         

        /**
         *  Math static api
         *  - Math.ceil 
         *  - Math.round
         *  - Math.floor | Math.trunc
         *  - Math.random
         */
        function test2(){
            console.log(Math.ceil(123.45));  // 124
            console.log(Math.round(123.45));  // 123
            console.log(Math.floor(123.45));  // 123

            const n = 1234.565432;
            // 반올림해서 소수점 둘째자리까지 이동하려면?
            console.log(Math.round(n * 100)/100); // 123456.5432 -> 123457 -> 1234.57 

            // Math.random() - 0.0이상, 1.0미만의 난수를 생성
            const rnd = Math.random()
            console.log(rnd);
            // 1 ~ 10 사이의 정수형 난수가 필요하면? : 버림(난수 * 경우의 수) + 최소값
            console.log(Math.floor(rnd * 10) + 1);
            
        }
    </script>


    <h2>Date</h2>
    <div id="clock"></div>
    <button onclick="test4();">확인</button>
    <script>
        /**
         * Date 
         *  - 날짜, 시각정보를 관리하는 객체
         *  - Date.prototype이 제공하는 메서드 사용
         */
        function test4(){
            const now = new Date();  // new 생성자함수 호출!
            console.log(typeof now, now);
            console.dir(now);
            console.log("getFullYear : ", now.getFullYear());
            console.log("getMonth : ", now.getMonth()); // month는 0부터 달을 세기(0~11) 때문에 사람식으로 생각하려면 +1처리를 해줘야함. 
            console.log("getDate : ", now.getDate());

            console.log("getDay : ", now.getDay()); // 일요일(0) ~ 토요일(6)
            const days = ['일', '월', '화', '수', '목', '금', '토'];
            console.log("요일 : ", days[now.getDay()]);

            console.log("getHours : ", now.getHours());
            console.log("getMinutes : ", now.getMinutes());
            console.log("getSeconds : ", now.getSeconds());

            console.log("unix time : ", now.getTime());
            console.log("unix time : ", Date.now());

            // 특정날짜시각정보를 가진 Date객체 생성
            console.log(new Date('2022/01/01'));
            console.log(new Date('2022/01/01 15:00:20'));
            console.log(new Date(2022, 1 - 1, 1));  // 2022년 1월 1일
            console.log(new Date(2022, 1 - 1, 1, 15, 0, 20));  // 2022년 1월 1일 15시 0분 20초 

            const millis = new Date(2022, 1 - 1, 1).getTime();
            console.log(new Date(millis));

            // 두 날짜 차이 구하기
            const tomorrow = new Date(2022, 4 - 1, 15, 18, 0);  // 초는 안주면 0
            // Date - Date = millis -> 두 날짜의 차이만큼 밀리초로 반환해준다.
            const diff = (tomorrow - now) / 1000 / 60 / 60 / 24; // 초 / 분 / 시 / 일 -> 일단위까지 얻는 법  
            console.log(diff);

        }

        function displayClock(date){
            const f = function(n){
                return n < 10 ? "0" + n : n;
            }

            const yyyy = date.getFullYear();
            const MM = f(date.getMonth() + 1);
            const dd = date.getDate();
            const hh = date.getHours();
            const mm = date.getMinutes();
            const ss = date.getSeconds();
            
            const str = `${yyyy}/${MM}/${dd} ${hh}:${mm}:${ss}`;
            clock.innerHTML = str;

            // 1초후에 다시 호출
            // 밀리세컨드 단위 -> 1 * 1000ms
            setTimeout(function(){
                // 현재 displayClock함수를 다시 전달해주는 함수
                displayClock(new Date());
            }, 1000);
            // setTimeout(함수, 시간) -> 지정된 시간 후마다 함수 실행해줘
        }

        displayClock(new Date());

    </script>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
</body>
</html>